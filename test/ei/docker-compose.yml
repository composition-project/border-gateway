version: '3.5'
services:

  tester:
    image: "tester:latest"
    networks:
      - public
      - backend_openid
    entrypoint:
      - /bgw/test/test.sh
      - /bgw/certs/CA.pem
      - ei

  bgw.test.eu:
    image: "docker.linksmart.eu/bgw:snapshot"
    environment:
      LOG_LEVEL: "debug"
    ports:
      - 9227:9227
      - 9228:9228
      - 9229:9229
      - 9230:9230
      - 9231:9231
    networks:
      - backend_backend
      - backend_openid
      - public
    volumes:
      - "./volumes/bgw/config:/bgw/config"
      - "../../certs:/bgw/certs"

networks:
  public:
    driver: bridge
  backend_backend:
    external: true
  backend_openid:
    external: true